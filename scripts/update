#!/usr/bin/env bash

set -e

root=$(readlink -f "$(dirname "${BASH_SOURCE[0]}")/..")

args=()
if [ "$1" = all ]
then
  args+=(--argstr all true)
  shift
elif [ "$#" -eq 1 ]
then
  args+=(--argstr path)
fi

pushd "$root" >/dev/null
nix-shell "$root/scripts/update.nix" "${args[@]}" "$@"
popd >/dev/null
